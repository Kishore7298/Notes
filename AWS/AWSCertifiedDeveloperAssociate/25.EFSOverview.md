## üìÅ Amazon EFS ‚Äî Elastic File System

### üîç Overview

* **EFS (Elastic File System)** is a **managed NFS (Network File System)** by AWS.
* Can be **mounted on multiple EC2 instances** **across multiple Availability Zones** (AZs).
* **Fully managed, scalable, and highly available.**
* **Pay-per-use** ‚Äî no capacity provisioning required.
* **3√ó more expensive** than a GP2 EBS volume.

---

### ‚öôÔ∏è Core Characteristics

| Feature          | Description                                     |
| ---------------- | ----------------------------------------------- |
| Type             | Managed **NFS** (Network File System)           |
| Mountable On     | Multiple EC2 instances across **different AZs** |
| Pricing          | Pay per GB used (no pre-provisioning)           |
| OS Compatibility | **Linux-based AMIs only** (Not for Windows)     |
| Protocol         | NFS (v4.x)                                      |
| Access Control   | Security Groups                                 |
| Encryption       | Supported at rest using **AWS KMS**             |
| File System Type | **POSIX-compliant**, standard Linux API         |

---

### üß† Use Cases

* **Content Management Systems** (WordPress, CMS)
* **Web serving** (shared site data across instances)
* **Data sharing** between instances
* **Home directories** or shared code/data repositories

---

### üåê Architecture Diagram

```mermaid
graph TD
    subgraph VPC["VPC with Multiple AZs"]
        subgraph AZ1["us-east-1a"]
            EC2A["EC2 Instance A"]
        end
        subgraph AZ2["us-east-1b"]
            EC2B["EC2 Instance B"]
        end
        subgraph AZ3["us-east-1c"]
            EC2C["EC2 Instance C"]
        end
        EFS["Amazon EFS (Network File System)"]
    end
    EC2A <--> EFS
    EC2B <--> EFS
    EC2C <--> EFS
```

‚úÖ All EC2 instances (in different AZs) mount the **same shared file system**.

---

### ‚ö° Scalability & Performance

* **Automatically scales** to petabytes.
* **Thousands of concurrent NFS clients** supported.
* **10+ GB/s throughput possible.**

---

### üß© Performance Modes (set at creation)

| Mode                          | Description                               | Use Case                   |
| ----------------------------- | ----------------------------------------- | -------------------------- |
| **General Purpose** (default) | Low latency                               | Web servers, CMS           |
| **Max I/O**                   | Higher latency but **massive throughput** | Big data, media processing |

---

### üöÄ Throughput Modes

| Mode            | Description                                                           | Characteristics                                                     |
| --------------- | --------------------------------------------------------------------- | ------------------------------------------------------------------- |
| **Bursting**    | Scales with storage size (e.g., 50 MB/s + burst to 100 MB/s per 1 TB) | Default option                                                      |
| **Provisioned** | Fixed throughput, independent of storage                              | Predictable workloads                                               |
| **Elastic**     | Automatically adjusts up/down with workload                           | Ideal for unpredictable workloads (up to 3 GB/s read, 1 GB/s write) |

---

### üíæ Storage Classes (Tiers)

| Tier                           | Purpose                        | Description                  |
| ------------------------------ | ------------------------------ | ---------------------------- |
| **EFS Standard**               | Frequently accessed data       | High availability (multi-AZ) |
| **EFS-IA (Infrequent Access)** | Less frequently accessed files | Lower cost, retrieval fee    |
| **EFS Archive**                | Rarely accessed data           | Lowest storage cost          |

#### Lifecycle Management

* Automatically **moves files between tiers** after a set number of days.
* Example: File in EFS Standard ‚Üí moved to EFS-IA after 60 days of inactivity.

```mermaid
graph LR
    A["EFS Standard (Hot Data)"] -->|Inactive 60 days| B["EFS Infrequent Access (Warm)"]
    B -->|Further inactivity| C["EFS Archive (Cold)"]
```

---

### üß± Availability & Durability

| Option                      | Zones                         | Use Case             | Notes                      |
| --------------------------- | ----------------------------- | -------------------- | -------------------------- |
| **EFS Standard (Multi-AZ)** | Multiple                      | Production           | High availability          |
| **EFS One Zone**            | Single AZ                     | Dev/Test             | Lower cost                 |
| **EFS One Zone-IA**         | Single AZ + Infrequent Access | Archive-like storage | Up to **90% cost savings** |

---

### üìù Summary

| Feature                  | Details                        |
| ------------------------ | ------------------------------ |
| **Type**                 | Managed NFS (Linux only)       |
| **Scalability**          | Automatic to petabytes         |
| **Performance Modes**    | General Purpose, Max I/O       |
| **Throughput Modes**     | Bursting, Provisioned, Elastic |
| **Storage Classes**      | Standard, EFS-IA, Archive      |
| **Availability Options** | Multi-AZ or One-Zone           |
| **Encryption**           | AWS KMS supported              |
| **Lifecycle Management** | Automatic tier transitions     |
| **Cost Saving**          | Up to 90% via storage tiers    |

---

**Prev**: [EBS Multi Attach](24.EBSMultiAttach.md) | **Next**: [EBS vs EFS vs Instance Store](26.EBSvsEFSvsInstanceStore.md) | [Index](../INDEX.md)
