# üîí EC2 Security Groups (Firewalls)

Security Groups are **virtual firewalls** that control **inbound and outbound traffic** to your EC2 instances.
They‚Äôre **fundamental to AWS network security** and operate at the **instance level**.

---

## üß± What Are Security Groups?

* Act as **firewalls** around EC2 instances.
* Control **how traffic is allowed in (inbound)** and **out (outbound)** of your instance.
* Contain **only ‚Äúallow‚Äù rules** (no deny rules).
* Rules can reference:

  * **IP addresses / IP ranges**
  * **Other security groups** (for dynamic trust relationships)

---

## üåê Basic Concepts

### ü°í Inbound Traffic

* From **outside ‚Üí EC2 instance**.
* Example: Allow SSH or HTTP access.

### ü°ê Outbound Traffic

* From **EC2 instance ‚Üí outside** (e.g., accessing the internet).
* By default, **all outbound traffic is allowed**.

---

## ‚öôÔ∏è Rule Components

Each rule includes:

| Field          | Description               | Example                |
| -------------- | ------------------------- | ---------------------- |
| **Type**       | Service name              | SSH, HTTP, HTTPS       |
| **Protocol**   | Communication type        | TCP, UDP, ICMP         |
| **Port Range** | Where traffic enters      | 22, 80, 443            |
| **Source**     | IP/CIDR or Security Group | `0.0.0.0/0` (anywhere) |

> `0.0.0.0/0` ‚Üí All IPv4 addresses
> `::/0` ‚Üí All IPv6 addresses

---

## üß© Key Behaviors

* ‚úÖ **Default:**

  * All **inbound** traffic is **blocked**
  * All **outbound** traffic is **allowed**

* üîÅ **Multiple Attachments:**

  * A single security group can be attached to **multiple EC2 instances**.
  * An EC2 instance can also have **multiple security groups** attached.

* üìç **Region/VPC Scoped:**

  * Security groups exist **within a region and VPC**.
  * You must recreate them when switching regions or VPCs.

* üß± **External to EC2:**

  * The firewall is **outside** the instance.
  * Blocked traffic **never reaches** the instance.

---

## üí° Developer Tips

* Maintain a **separate security group for SSH** ‚Äî easier to manage access.
* If you get:

  * **Timeout** ‚Üí Security group is blocking access.
  * **Connection Refused** ‚Üí Security group allowed access, but app/service isn‚Äôt running.

---

## üîó Referencing Other Security Groups

You can **reference security groups inside other groups** ‚Äî useful for internal communication (like load balancers).

### Example Diagram

| Instance | Security Group | Allowed From    |
| -------- | -------------- | --------------- |
| EC2 #1   | SG-1           | SG-1 + SG-2     |
| EC2 #2   | SG-2           | SG-1            |
| EC2 #3   | SG-3           | ‚ùå (Not allowed) |

‚úÖ EC2 #1 and EC2 #2 can talk to each other
‚ùå EC2 #3 cannot, as it‚Äôs not in an allowed group

This setup removes the need to manage **individual IP addresses**.

---

## üß† Common Ports to Know (Exam/Practical)

| Port     | Protocol | Description             | Typical Use            |
| -------- | -------- | ----------------------- | ---------------------- |
| **22**   | SSH      | Secure Shell            | Linux instance login   |
| **21**   | FTP      | File Transfer Protocol  | Upload/download files  |
| **22**   | SFTP     | Secure File Transfer    | FTP over SSH           |
| **80**   | HTTP     | Unsecured web traffic   | Websites (http://)     |
| **443**  | HTTPS    | Secured web traffic     | Websites (https://)    |
| **3389** | RDP      | Remote Desktop Protocol | Windows instance login |

---

## üß≠ Summary

* Security groups = **stateful firewalls** at instance level.
* Control inbound/outbound access using **allow rules**.
* Default: all inbound blocked, all outbound allowed.
* Can **reference other security groups** for internal networking.
* Know key ports (22, 80, 443, 3389) for AWS and exam contexts.

---

**Prev**: [EC2 Types](14.EC2Types.md) | **Next**: [EC2 SSH](16.EC2SSH.md) | [Index](../INDEX.md)
