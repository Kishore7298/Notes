### âš™ï¸ Amazon Machine Image (AMI)

**Definition:**

* **AMI** = *Amazon Machine Image*
* It represents a **customization of an EC2 instance**.
* AMIs define **how an EC2 instance is launched**, including:

  * Operating system
  * Software configuration
  * Monitoring tools
  * Any pre-installed applications

---

### ðŸ§© Purpose of an AMI

* Provides a **blueprint** for launching EC2 instances.
* Using a custom AMI:

  * Reduces **boot time** and **configuration time**
  * Ensures **consistent environment setup**
* AMIs are **region-specific** but can be **copied across regions** for global use.

---

### ðŸ–¥ï¸ Types of AMIs

1. **Public AMIs**

   * Provided by **AWS**
   * Example: *Amazon Linux 2 AMI*
   * Free to use, pre-configured for general workloads

2. **Custom AMIs**

   * Created by **users**
   * Allow complete control over software setup
   * Must be **maintained manually** (though automation tools exist)

3. **AWS Marketplace AMIs**

   * Created and sold by **third-party vendors**
   * Often come pre-configured with licensed software
   * You can also **publish and sell** your own AMIs on the marketplace

```mermaid
flowchart LR
    A[AMI Types] --> B[Public AMIs - AWS Provided]
    A --> C["Custom AMIs (User-Created)"]
    A --> D[Marketplace AMIs - Third-Party]
```

---

### ðŸ§± Components Inside an AMI

Each AMI includes:

* **Base OS** (Linux, Windows, etc.)
* **Application Server / Software Stack**
* **Custom Configurations**
* **Monitoring / Security Agents**

---

### ðŸª„ AMI Creation Process

1. **Start an EC2 Instance**

   * Choose a base AMI (e.g., Amazon Linux 2).

2. **Customize the Instance**

   * Install software, configure settings, etc.

3. **Stop the Instance**

   * Ensures **data integrity** before imaging.

4. **Create AMI from Instance**

   * Behind the scenes, AWS takes **EBS snapshots** of attached volumes.

5. **Launch New Instances from AMI**

   * Use your custom AMI to create identical EC2 instances.

```mermaid
sequenceDiagram
    participant User
    participant EC2
    participant AMI
    participant EBS

    User->>EC2: Launch instance (base AMI)
    EC2->>User: Running instance
    User->>EC2: Customize configuration
    User->>EC2: Stop instance
    EC2->>AMI: Create image from instance
    AMI->>EBS: Create snapshots (backups)
    AMI->>User: Custom AMI ready
    User->>EC2: Launch new instances using AMI
```

---

### ðŸŒ Multi-AZ / Multi-Region Example

Scenario:

* You have an EC2 instance in **us-east-1a**.
* You want to replicate it in **us-east-1b**.

Process:

1. Launch and customize EC2 instance in **us-east-1a**.
2. Create a **custom AMI** from it.
3. Use that AMI to **launch a new instance** in **us-east-1b**.

```mermaid
flowchart LR
    A[EC2 Instance - us-east-1a] --> B[Custom AMI Created]
    B --> C[EC2 Instance - us-east-1b - Launched from AMI]
```

---

### âœ… Summary

| Concept               | Description                                   |
| --------------------- | --------------------------------------------- |
| **AMI**               | Blueprint for launching EC2 instances         |
| **Public AMI**        | Provided by AWS, general-purpose              |
| **Custom AMI**        | User-created, pre-configured, faster launches |
| **Marketplace AMI**   | Third-party prebuilt images (can be sold)     |
| **Behind the scenes** | AMI creation triggers EBS snapshots           |
| **Multi-Region**      | AMIs can be copied across regions for reuse   |

---

**Prev**: [EBS Snapshot](20.EBSSnapshot.md) | **Next**: [EC2 Instance Store](22.EC2InstanceStore.md) | [Index](../INDEX.md)
